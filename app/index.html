<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport">

    <!-- basic css structure -->
    <link rel="stylesheet" href="assets/basic.css">
    
    <!-- colorset -->
    <link rel="stylesheet" href="assets/theme/dark/style.css">

    <!-- js libs -->
    <script type="text/javascript">window.$ = window.jQuery = require('./lib/jquery-3.2.1.min.js');</script>

    <!-- node libs -->
    <script type="text/javascript">const crypto = require('crypto');</script>
    <script type="text/javascript">const fs = require("fs");</script>
    <script type="text/javascript">const async = require('async');</script>
    <script type="text/javascript">const path = require('path');</script>
    <script type="text/javascript">const stream = require('stream');</script>
    <script type="text/javascript">const util = require('util');</script>
    <script type="text/javascript">const unzip = require('unzip2');</script>
    <script type="text/javascript">const lwip = require('@mcph/lwip');</script>
    <script type="text/javascript">const https = require('https');</script>
    <script type="text/javascript">const { exec } = require('child_process');</script>

    <!-- added modules -->
    <script type="text/javascript" src="js/env.js"></script>
    <script type="text/javascript" src="js/module.js"></script>
    <script type="text/javascript" src="js/menu.js"></script>
    <script type="text/javascript" src="js/lang.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
    <script type="text/javascript" src="js/version.js"></script>
    <script type="text/javascript" src="js/loader.js"></script>
    <script type="text/javascript" src="js/image.js"></script>
    <script type="text/javascript" src="js/drop.js"></script>
	
    <script type="text/javascript">
		var globals = {
			env: new Environment(),
			module: new Module(),
			menu: new Menu("#menulist", ".entrycontainer"),
			langData: new Language(),
			gameData: new GameData(),
			imageData: new ImageDatabase(),
			loader: new Loader()
		};
		
		$(function(){
			$("title").html(globals.env.name);
			$(".titlebar").html(globals.env.name);
		
			globals.langData.loadAll(function(){
				globals.langData.setLang("en", "us");
                // external modules
				var modules = globals.module.findModules([
                    globals.env.path.module.user,
                    globals.env.path.module.app
                    ]);
                if (!globals.env.isDevEnv) {
                    // dist / pack build only
                    // internal modules (static, hard links)
                    modules = modules.concat([
                        `file://${__dirname}/../modules/ccloader/package.json`,
                        `file://${__dirname}/../modules/items/package.json`,
                        `file://${__dirname}/../modules/settings/package.json`,
                        `file://${__dirname}/../modules/status/package.json`
                        ]);
                }
				globals.module.loadModules(modules, function(){
					globals.module.onLoaded();
					globals.loader.loadSaved();
				});
			});
			
		});
		

    </script>

    <!-- basic html structure -->
    <link rel="icon" href="assets/ccdirectlink.png">
    <title></title>

  </head>
  <body class="universe" ondrop="drop(event)" ondragover="allowDrop(event)">

    <div class="space">
      <div class="titlebar" id="headbar"></div>
      <div class="content" id="servercontainer">
        <div class="menu" id="sidemenu">
          <ul id="menulist">
          </ul>
        </div>
        <div class="entrycontainer" id="blank">
        </div>
      </div>
    </div>

  </body>
</html>