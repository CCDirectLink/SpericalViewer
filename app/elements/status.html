<script type="text/javascript">

	$.getScript("js/status/list.js", function( data, textStatus, jqxhr ) {

		$(function(){

			// lang
			$( "#license" ).html(spo.langData.getEntry("license"));
			$( "#loadedGameTitle" ).html(spo.langData.getEntry("loadedGames"));
			$( "#storedGameTitle" ).html(spo.langData.getEntry("storedGameData"));


			if ((typeof spo.moduleMemory['status'] == "undefined") || (typeof spo.moduleMemory['status']['gameStorageController'] == "undefined"))
			{
				if (typeof spo.moduleMemory['status'] == "undefined") spo.moduleMemory['status'] = Object();
				spo.moduleMemory['status']['gameStorageController'] = new gameStorageController();
			}
			
			if ((typeof spo.moduleMemory['status'] == "undefined") || (typeof spo.moduleMemory['status']['statusList'] == "undefined"))
			{
				if (typeof spo.moduleMemory['status'] == "undefined") spo.moduleMemory['status'] = Object();
				spo.moduleMemory['status']['statusList'] = new statusList();
			}
			//moduleMemory['status']['gameStorageController'].cacheData;

			// init programm data
			$( "#version").html(spo.env.version.string);
			$( "#build").html(spo.env.version.build);

			// init table
			$( "#loadedGame").html("<table>" + spo.moduleMemory['status']['statusList'].getTable() + "</table>");
			$( "#storedGame").html(spo.langData.getEntry("noGames"));

			// register callback
			if ((typeof spo.moduleMemory['status'] == "undefined") || (typeof spo.moduleMemory['status']['callbackRegistered'] == "undefined"))
			{
				if (typeof spo.moduleMemory['status'] == "undefined") spo.moduleMemory['status'] = Object();

				spo.gameData.registerCallback(function(data, entry)
				{
					if (data == null)
					{
						for (var statusIndex in spo.moduleMemory['status']['statusList'].statusArray)
	      				{
	      					if (spo.moduleMemory['status']['statusList'].statusArray[statusIndex].id == entry)
	      					{
	      						spo.moduleMemory['status']['statusList'].statusArray.splice(statusIndex, 1);
	      					}
						}
					}
					else
					{
						spo.moduleMemory['status']['statusList'].statusArray.push({id: data.shortId, version: data.version.string, size: "0 kiB"});
					}

					$( "#loadedGame").html("<table>" + spo.moduleMemory['status']['statusList'].getTable() + "</table>");

				}, {identifier: [{param: "version"}, {param: "shortId"}]});

				spo.moduleMemory['status']['callbackRegistered'] = true;

			}

		});

	});

</script>
<center>
	<h1>SpericalViewer</h1>
	<span id="version"></span> - build <span id="build"></span><br/>
	&#169; 2016 CCDirectLink<br/>
	<span id="license"></span>
</center><br/>
<span id="loadedGameTitle"></span>:
<div class="elementcontainer" id="loadedGame">
</div><br />
<span id="storedGameTitle"></span>:
<div class="elementcontainer" id="storedGame">
</div>