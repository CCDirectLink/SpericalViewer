<script type="text/javascript">

	$.getScript("js/gameStorage.js", function( data, textStatus, jqxhr ) {

		$.getScript("js/statusList.js", function( data, textStatus, jqxhr ) {

			$(function(){

				if ((typeof moduleMemory['status'] == "undefined") || (typeof moduleMemory['status']['gameStorageController'] == "undefined"))
				{
					if (typeof moduleMemory['status'] == "undefined") moduleMemory['status'] = Object();
					moduleMemory['status']['gameStorageController'] = new gameStorageController();
				}
				
				if ((typeof moduleMemory['status'] == "undefined") || (typeof moduleMemory['status']['statusList'] == "undefined"))
				{
					if (typeof moduleMemory['status'] == "undefined") moduleMemory['status'] = Object();
					moduleMemory['status']['statusList'] = new statusList();
				}
				//moduleMemory['status']['gameStorageController'].cacheData;

				// init programm data
				$( "#version").html(envVersion);
				$( "#build").html(envBuild);

				// init table
				$( "#loadedGame").html("<table>" + moduleMemory['status']['statusList'].getTable() + "</table>");

				// register callback
				if ((typeof moduleMemory['status'] == "undefined") || (typeof moduleMemory['status']['callbackRegistered'] == "undefined"))
				{
					if (typeof moduleMemory['status'] == "undefined") moduleMemory['status'] = Object();

					gameData.registerCallback(function(data, entry)
					{
						if (data == null)
						{
							for (var statusIndex in moduleMemory['status']['statusList'].statusArray)
		      				{
		      					if (moduleMemory['status']['statusList'].statusArray[statusIndex].id == entry)
		      					{
		      						moduleMemory['status']['statusList'].statusArray.splice(statusIndex, 1);
		      					}
							}
						}
						else
						{
							moduleMemory['status']['statusList'].statusArray.push({id: data.shortId, version: data.version.string, size: "0 kiB"});
						}

						$( "#loadedGame").html("<table>" + moduleMemory['status']['statusList'].getTable() + "</table>");

					}, {identifier: [{param: "version"}, {param: "shortId"}]});

					moduleMemory['status']['callbackRegistered'] = true;

				}

			});

		});

	});

</script>
<center>
	<h1>SpericalViewer</h1>
	<span id="version"></span> - build <span id="build"></span><br/>
</center>
Loaded games:
<div class="elementcontainer" id="loadedGame">
(no games)
</div><br />
Cached games:
<div class="elementcontainer" id="cachedGame">
(no games)
</div>